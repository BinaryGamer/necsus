<html>
<head>
</head>
<body>
  <main></main>
  <script src="/client/Neccsus.js"></script>
  <script>
    /*
      Elm app
    */
    var app = Elm.Neccsus.init({
      node: document.querySelector('main')
    })
    
    /*
      Local storage port
    */
    // Send to Elm
    var cache = localStorage.getItem('cache');
    app.ports.uncache.send(cache);

    // Retrieve from Elm
    app.ports.cache.subscribe(function(data) {
      localStorage.setItem('cache', data);
    });

    /*
      Speech synthesis port
    */
    app.ports.speak.subscribe(function(text) {
      var utterance = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(utterance);
    });
  </script>
</body>
</html>
